---
title: The frequency assignment of musical notes
date: 2020-03-27 07:31:55 Z
categories:
- music
layout: post
---

# The notes

First, let's define what is a *note*.

A note is an element of the countable set $N$.
Here exists a bijection from $\mathbb Z$ to $N$ denoted as
$k\mapsto n_k$. Therefore, all notes form a sequence
\begin{equation\*}
    \dots,n_{-2},n_{-1},n_0,n_1,n_2,\dots
\end{equation\*}

Our goal is to define a *frequency assignment*, which is a mapping
$f:N\rightarrow\mathbb R$, whose meaning is the frequency (in Hz)
of the sound of a note.

It is a natural idea to define a sequence
\begin{equation\*}
    f_k:=f\left(n_k\right).
\end{equation\*}
It makes sense that the sequence is in strictly increasing order.

# The octaves

Now, let's think about a *musical interval*. At this stage, a
musical interval can be defined as an unordered pair of notes.
After long time of experimenting, people find that they tend to
think a musical interval extremely harmonic if it consists of
such two notes that the frequency of one of them doubles that of
the other.

In other words, the musical interval of $n_a$ and $n_b$ is
extremely harmonic if $f_b=2f_a$. In fact, it is so harmonic that
if the two notes are played simultaneously, a person tend to
think there is only one note being played:
<audio controls>
    <source src="/assets/audios/octave_interval.mp3"
    type="audio/mpeg">
(Your browser does not support the audio element.)
</audio>
```
motif = c4 c g g a a g2
piano:
V1: o4 motif motif
V2: o5 motif
```
The audio above is an illustration for octave intervals.
As can be heard, the first part of the audio is played in
octave intervals while the second part is played in single notes.

Considering that, here comes an amazing idea by which we can kind
of make the sequence $\left\\{f_k\right\\}$ seem "periodic".
Let the "period" be denoted as $T$. Because it is not virtually
periodic, we tend to call it an *octave* instead of a period.
After that, the constant $T$ is the length of an octave.

What on earth is an octave defined? It is
\begin{equation\*}
    \forall k:f_{k+T}=2f_k.
\end{equation\*}
Why do we say an octave is like a period? It is because according
to the explanation above, corresponding notes in different octaves
sound so harmonic that a person almost think they are the same.
In this way, for some questions, we only need to consider
a single octave instead of all notes.
Let's define the *base octave*, notes of which can generate all
other notes by multiplying the frequency by a power of 2:
\begin{equation\*}
    O_0:=\left\\{n_k\middle|
    k\in\left[0,T\right)\cap\mathbb Z\right\\},
\end{equation\*}
so we can say the frequency assignment has $T$ different *tones*.
We can thus define a sequence of octaves
\begin{equation\*}
    O_m:=\left\\{n_{k+mT}\middle|n_k\in o_0\right\\}.
\end{equation\*}
In fact, any octave can be the base octave. They are all the same.
For any $m$, all notes can be generated by notes in $O_m$.

\begin{array}{|c|cccccc|}
    \hline
    \textrm{tone} & \cdots & O_{-1} & O_0 & O_1 & O_2 & \cdots
    \\\\\hline
    0&\cdots& n_{-T}&n_0& n_T & n_{2T}&\cdots\\\
    1&\cdots&n_{-T+1}&n_1&n_{T+1}&n_{2T+1}&\cdots\\\
    2&\cdots&n_{-T+2}&n_2&n_{T+2}&n_{2T+2}&\cdots
    \\\
    \cdots&\cdots&\cdots&\cdots&\cdots&\cdots&\cdots
    \\\
    T-1&\cdots&n_{-1}&n_{T-1}&n_{2T-1}&n_{3T-1}&\cdots
    \\\\\hline
    \label{octaves}
\end{array}
Table \ref{octaves} shows the sequence of octaves.

If we define $p_k:=\log_2f_k$, it is interesting to see that
\begin{equation\*}
    \forall k:p_{k+T}=p_k+1.
\end{equation\*}
From that, we can naturally think an excellent frequency
assignment be defined as
\begin{equation}
    p_k:=p_0+\frac kT,
    \label{p_freq_def}
\end{equation}
which is an elegant arithmetic progression.

# The octave group

Note that here "group" is the group concept in algebra.

Let
\begin{equation\*}
    Q:=\left\\{\frac kT\middle|
    k\in\left[0,T\right)\cap\mathbb Z\right\\}.
\end{equation\*}
It is obvious that $q\mapsto n_{\left(m+q\right)T}$
is a bijection from $Q$ to $O_m$.

In fact, $Q$ is a group of size $T$ whose group operation is
defined as
\begin{equation\*}
    q_1\circ q_2:=\left\\{q_1+q_2\right\\},
\end{equation\*}
where $\left\\{x\right\\}:=x-\left\lfloor x\right\rfloor$.
In this way, $\left(Q,\circ\right)$ forms a group, as can
be verified.

With the bijection $q\mapsto n_{\left(m+q\right)T}$, we can
also define a group operation $\circ$ on $O_m$.
Therefore, we can call $\left(O_m,\circ\right)$
an *octave group*.

The octave group has a musical meaning which
we should take a further look at musical intervals to find out.

# The musical intervals

Taking Formula \ref{p_freq_def}, people find that although
it is sometimes subjective whether a musical interval sounds
harmonic or not, it does not depend on where the interval is
located but on how far the two notes making up the interval are.

Taking this sense, we can consider only those intervals involving
$n_0$ because we can always translate a interval so that one of
its notes is $n_0$. Taking this idea, we can conclude that an
interval can be represented by a note $n_k$ because
the interval is equivalent to another interval
which consists of $n_0$ and $n_k$.

We can make this idea even further. Previously, I have stated
that a note can always be generated by a note in $O_m$. Therefore,
an interval can be represented as a note in $O_m$.

Now, let's look back to the octave group $O_m$. The note
$n_a\circ n_b$ is in actually representing the interval
consisting of $n_a$ and $n_b$.

Well, why do we focus on the group? It is because we need to
mention an important concept in group theory,
which is "generator". It has something to do with determining
the value of $T$.

The value of $p_0$ does not matter because changing it is just a
translation of the whole sequence. What really matters is the
value of $T$.

The inventor of the current prevailing frequency assignment
(which is the twelve-tone equal temperament shown in
Formula \ref{12_equal_def}) may think the generator of the group
a vital thing.
Actually, people think it a wonderful thing that a note
representing a very harmonic interval is a generator of the
octave group.

Fortunately, such a goal is achievable. People find that if
$p_b=p_a+\frac7{12}$, then the interval
(which is the perfect fifth interval if you know music theory)
consisting of $n_a$ and $n_b$ sounds very harmonic:

<audio controls>
    <source src="/assets/audios/fifth_interval.mp3"
    type="audio/mpeg">
(Your browser does not support the audio element.)
</audio>

```
motif = e4 a f2 d4 g c2
piano:
V1: motif
V2: (transpose 7) motif
```

Furthermore, as can be seen in Table \ref{generator},
$n_7$ is a generator of the group $O_0$ if $T:=12$.
\begin{array}{|c|cccccccccccc|}
    \hline
    j&0&1&2&3&4&5&6&7&8&9&10&11
    \\\\\hline
    n_7^{\circ j}&
    n_0&n_7&n_2&n_9&n_4&n_{11}&n_6&n_1&n_8&n_3&n_{10}&n_5
    \\\\\hline
    \label{generator}
\end{array}
Thus, wonderful! Let's take $T:=12$.

# The twelve-tone equal temperament

The twelve-tone equal temperament is the most popular
frequency assignment used nowadays. It is defined as
\begin{equation}
    f_k:=16.35\cdot 2^\frac k{12},
    \label{12_equal_def}
\end{equation}
which can be derived from Formula \ref{p_freq_def} taking
\begin{equation\*}
    p_0:=4.0312,\ \ T:=12.
\end{equation\*}

The frequency assignment has $12$ different tones, $7$ of which
have their names:
\begin{equation\*}
    \mathrm C_m:=n_{12m},
\end{equation\*}
\begin{equation\*}
    \mathrm D_m:=n_{12m+2},
\end{equation\*}
\begin{equation\*}
    \mathrm E_m:=n_{12m+4},
\end{equation\*}
\begin{equation\*}
    \mathrm F_m:=n_{12m+5},
\end{equation\*}
\begin{equation\*}
    \mathrm G_m:=n_{12m+7},
\end{equation\*}
\begin{equation\*}
    \mathrm A_m:=n_{12m+9},
\end{equation\*}
\begin{equation\*}
    \mathrm B_m:=n_{12m+11}.
\end{equation\*}
The famous "middle C" is $\mathrm C_4$.

# Why $\frac 7{12}$

People think if the ratio of two frequencies is a simple
rational number, then the interval of the two notes is harmonic.

$2^\frac 7{12}\approx\frac32$, which is a simple ratio.
Harmonic, huh.

(Finally, as is a notice, codes appearing above are
[alda](https://alda.io/){:target="_blank"} codes,
which are used to write music.)
